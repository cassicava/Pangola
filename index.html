<!DOCTYPE html>
<html lang="pt-br">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Pangola</title>
  <link rel="stylesheet" href="style.css">
  <link href="https://fonts.googleapis.com/css2?family=Lobster&display=swap" rel="stylesheet">
</head>
<body>

<header>
  <h1 class="logo">Pangola</h1>
</header>

<main>
  <nav id="menu-categorias">
    <a href="#lanches">Lanches</a>
    <a href="#porcoes">Por√ß√µes</a>
    <a href="#bebidas">Bebidas</a>
  </nav>

  <section class="tipos">
    <h2 id="lanches">LANCHES</h2>

    <h3>ü•™ LANCHES</h3>
    <div id="lista-lanchessimples"></div>

    <h3>üçî LANCHES COM HAMB√öRGUER</h3>
    <div id="lista-lancheshamburguer"></div>

    <h3>üå≠ CACHORRO QUENTE</h3>
    <div id="lista-lanchescachorro"></div>

    <h3>üêî LANCHES COM FRANGO</h3>
    <div id="lista-lanchesfrango"></div>

    <h3>ü•© LANCHES COM FIL√â</h3>
    <div id="lista-lanchesfile"></div>
  </section>

  <section class="tipos">
    <h2 id="porcoes">POR√á√ïES</h2>
    <div id="lista-porcoes"></div>
  </section>

  <section class="tipos">
    <h2 id="bebidas">BEBIDAS</h2>
    <div id="lista-bebidas"></div>
  </section>
  
  <div class="autor">
    <p>Desenvolvido por <a href="https://wa.me/5516992003253" target="_blank">Cassiano - WhatsApp</a></p>
  </div>
</main>

<footer>
  <div class="carrinho-info">
    <span>Total: R$ <span id="valor-total">0,00</span></span>
    <button id="btn-finalizar">Ver Carrinho (<span id="quantidade-carrinho">0</span>)</button>
  </div>
</footer>

<div id="popup-carrinho">
  <div class="popup-conteudo">
    <button id="btn-fechar">X</button>
    <h2>Seu Pedido</h2>
    
    <div id="lista-carrinho"></div>
    <div id="valor-total-popup">
        Total: <span id="valor-total-popup-valor">R$ 0,00</span>
    </div>

    <hr>

    <div class="campo-form">
      <label for="nome-cliente">Seu Nome:</label>
      <input type="text" id="nome-cliente" placeholder="Digite seu nome" required>
    </div>

    <div class="campo-form">
        <label>Tipo de Pedido:</label>
        <div class="radio-group">
            <input type="radio" id="tipo-entrega" name="tipo-pedido" value="entrega" checked>
            <label for="tipo-entrega">Entrega</label>
            <input type="radio" id="tipo-retirada" name="tipo-pedido" value="retirada">
            <label for="tipo-retirada">Retirada no Local</label>
        </div>
    </div>

    <div id="campos-entrega-container" style="display: flex;">
        <div class="campo-form">
            <label for="endereco-cliente">Seu Endere√ßo:</label>
            <input type="text" id="endereco-cliente" placeholder="Rua, n√∫mero, bairro" required>
        </div>
        <div class="campo-form">
            <label>Forma de Pagamento:</label>
            <div class="radio-group">
                <input type="radio" id="pagamento-dinheiro" name="forma-pagamento" value="dinheiro">
                <label for="pagamento-dinheiro">Dinheiro</label>
                <input type="radio" id="pagamento-cartao" name="forma-pagamento" value="cartao">
                <label for="pagamento-cartao">Cart√£o</label>
            </div>
        </div>
        <div class="campo-form" id="campo-troco-container" style="display: none;">
            <label for="troco-pedido">Precisa de troco para quanto?</label>
            <input type="number" id="troco-pedido" placeholder="Ex: 50 (deixe em branco se n√£o precisar)">
        </div>
    </div>
    
     <button id="btn-enviar">
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 11.5a8.38 8.38 0 0 1-.9 3.8 8.5 8.5 0 0 1-7.6 4.7 8.38 8.38 0 0 1-3.8-.9L3 21l1.9-5.7a8.38 8.38 0 0 1-.9-3.8 8.5 8.5 0 0 1 4.7-7.6 8.38 8.38 0 0 1 3.8-.9h.5a8.48 8.48 0 0 1 8 8v.5z"></path></svg>
        <span>Finalizar Pedido</span>
    </button>
  </div>
</div>

<div id="popup-confirmar">
  <div class="popup-conteudo">
    <h2>Deseja adicionais?</h2>
    <div class="popup-buttons">
      <button id="btn-adicional-sim">Sim</button>
      <button id="btn-adicional-nao">N√£o</button>
    </div>
  </div>
</div>

<div id="popup-adicionais">
  <div class="popup-conteudo">
    <h2>Escolha seus adicionais</h2>
    <div id="lista-adicionais"></div>
    <div class="popup-buttons">
      <button id="btn-add-concluir">Concluir</button>
    </div>
  </div>
</div>

<script>
const produtos = {
  lanchessimples: [
    { nome: "Misto Quente", descricao: "Presunto, queijo, alface, tomate, milho, batata, maionese", preco: 18 },
    { nome: "Americano", descricao: "Presunto, queijo, ovo, alface, tomate, maionese", preco: 21 },
    { nome: "Misto Bacon", descricao: "Presunto, queijo, bacon, alface, tomate, milho, batata, maionese", preco: 23 }
  ],
  lancheshamburguer: [
    { nome: "X-Burguer", descricao: "Hamb√∫rguer, queijo, tomate, catupiry", preco: 16 },
    { nome: "X-Salada", descricao: "Hamb√∫rguer, presunto, queijo, alface, tomate, catupiry", preco: 21 },
    { nome: "X-Egg", descricao: "Hamb√∫rguer, presunto, queijo, ovo, tomate, catupiry", preco: 22 },
    { nome: "X-Bacon", descricao: "Hamb√∫rguer, presunto, queijo, bacon, tomate, catupiry", preco: 25 },
    { nome: "X-Tudo", descricao: "Hamb√∫rguer, presunto, queijo, bacon, ovo, alface, tomate, catupiry", preco: 30 },
    { nome: "X-Tudo Duplo", descricao: "2 Hamb√∫rgueres, presunto, queijo, 2 ovos, bacon, alface, tomate, catupiry", preco: 40 }
  ],
  lanchescachorro: [
    { nome: "Tradicional", descricao: "Molho, salsicha, alface, tomate, milho, batata, catchup, maionese", preco: 15 },
    { nome: "Especial", descricao: "Molho, salsicha, alface, tomate, milho, batata, presunto e queijo", preco: 20 },
    { nome: "Tudo", descricao: "Molho, salsicha, alface, tomate, milho, batata, presunto, queijo, bacon, hamb√∫rguer", preco: 30 }
  ],
  lanchesfrango: [
    { nome: "X-Frango Salada", descricao: "Frango, presunto, queijo, alface, tomate, catupiry", preco: 30 },
    { nome: "X-Frango Bacon", descricao: "Frango, presunto, queijo, bacon, tomate, catupiry", preco: 35 },
    { nome: "X-Frango Tudo", descricao: "Frango, presunto, queijo, alface, tomate, bacon, ovo e catupiry", preco: 40 }
  ],
  lanchesfile: [
    { nome: "X-Fil√©", descricao: "Fil√©, queijo, alface, tomate, catupiry", preco: 35 },
    { nome: "Bauru", descricao: "Fil√©, queijo, alface, tomate, bacon, catupiry", preco: 40 },
    { nome: "X-Fil√© Tudo", descricao: "Fil√©, presunto, queijo, alface, tomate, bacon, ovo, catupiry", preco: 45 }
  ],
  adicionais: [
    { nome: "Hamb√∫rguer", preco: 5 }, { nome: "Bacon", preco: 6 }, { nome: "Queijo/Presunto", preco: 6 }, { nome: "Cheddar/Catupiry", preco: 5 }, { nome: "Salsicha", preco: 3 }, { nome: "Ovo", preco: 3 }, { nome: "Milho", preco: 3 }, { nome: "Batata Palha", preco: 3 }
  ],
  porcoes: [
    { nome: "Batata Frita (Meia)", preco: 20 }, { nome: "Batata Frita (Inteira)", preco: 30 }, { nome: "Batata Queijo e Bacon (Meia)", preco: 40 }, { nome: "Batata Queijo e Bacon (Inteira)", preco: 52 }, { nome: "Batata Completa (Meia)", preco: 52 }, { nome: "Batata Completa (Inteira)", preco: 58 }, { nome: "Frango √† Passarinho (Meia)", preco: 50 }, { nome: "Frango √† Passarinho (Inteira)", preco: 58 }, { nome: "Frango √† Passarinho Queijo e Bacon (Meia)", preco: 58 }, { nome: "Frango √† Passarinho Queijo e Bacon (Inteira)", preco: 65 }, { nome: "Calabresa Acebolada (Meia)", preco: 30 }, { nome: "Calabresa Acebolada (Inteira)", preco: 50 }, { nome: "Fil√© na Chapa (Meia)", preco: 55 }, { nome: "Fil√© na Chapa (Inteira)", preco: 90 }, { nome: "Fil√© de Frango na Chapa (Meia)", preco: 35 }, { nome: "Fil√© de Frango na Chapa (Inteira)", preco: 60 }
  ],
  bebidas: [
    { nome: "Refrigerante lata 350ml", preco: 6 }, { nome: "Suco pequeno 330ml", preco: 7 }, { nome: "Suco grande 900ml", preco: 15 }, { nome: "Coca Cola 2L", preco: 15 }, { nome: "Refrigerante sabores 2L", preco: 14 }, { nome: "Jaboti 2L", preco: 8 }, { nome: "√Ågua sem g√°s", preco: 4 }, { nome: "√Ågua com g√°s", preco: 5 }, { nome: "H2O 500ml", preco: 7 }, { nome: "H2O 1,5L", preco: 15 }, { nome: "Cerveja lata 350ml", preco: 6 }
  ]
};

// --- ELEMENTOS DA DOM ---
const listaCarrinho = document.getElementById('lista-carrinho');
const valorTotal = document.getElementById('valor-total');
const quantidadeCarrinho = document.getElementById('quantidade-carrinho');
const valorTotalPopupValor = document.getElementById('valor-total-popup-valor');
const popupCarrinho = document.getElementById('popup-carrinho');
const btnFinalizar = document.getElementById('btn-finalizar');
const btnFechar = document.getElementById('btn-fechar');
const btnEnviar = document.getElementById('btn-enviar');

const popupConfirmar = document.getElementById('popup-confirmar');
const btnAdicionalSim = document.getElementById('btn-adicional-sim');
const btnAdicionalNao = document.getElementById('btn-adicional-nao');
const popupAdicionais = document.getElementById('popup-adicionais');
const btnAddConcluir = document.getElementById('btn-add-concluir');

let carrinho = [];
let produtoSelecionado = null;
// --- FIM ELEMENTOS DA DOM ---

// --- FUN√á√ïES DE L√ìGICA DO CARRINHO (MESCLADAS) ---
function adicionarProduto(nome, preco, adicionais=[]) {
  let descricaoAdd = adicionais.length > 0 ? " (c/ " + adicionais.map(a=>a.nome).join(", ") + ")" : "";
  let nomeFinal = nome + descricaoAdd;
  let precoFinal = preco + adicionais.reduce((total, adicional) => total + adicional.preco, 0);

  const existente = carrinho.find(item => item.nome === nomeFinal);
  if (existente) {
      existente.quantidade++;
  } else {
      carrinho.push({ nome: nomeFinal, preco: precoFinal, quantidade: 1 });
  }
  atualizarCarrinho();
}

function calcularTotal() {
  return carrinho.reduce((total, item) => total + item.preco * item.quantidade, 0);
}

function atualizarCarrinho() {
  const total = calcularTotal();
  const totalItens = carrinho.reduce((sum, item) => sum + item.quantidade, 0);

  valorTotal.innerText = total.toFixed(2).replace('.', ',');
  valorTotalPopupValor.innerText = `R$ ${total.toFixed(2).replace('.', ',')}`;
  quantidadeCarrinho.innerText = totalItens;
}
// --- FIM FUN√á√ïES DE L√ìGICA DO CARRINHO ---


// --- FUN√á√ïES DE MANIPULA√á√ÉO DA TELA (UI) ---
function criarProduto(produto, container, isLanche=false) {
  const div = document.createElement('div');
  div.classList.add('produtos');
  div.setAttribute('data-nome', produto.nome);
  div.setAttribute('data-preco', produto.preco);

  div.innerHTML = `
    <div class="topo-produto">
      <div>
        <h4>${produto.nome}</h4>
        ${produto.descricao ? `<p class="descricao">${produto.descricao}</p>` : ""}
      </div>
      <div class="preco-controle">
        <h6>R$ ${produto.preco.toFixed(2).replace('.', ',')}</h6>
        <button class="btn-add">Adicionar</button>
      </div>
    </div>
  `;

  container.appendChild(div);

  const addBtn = div.querySelector(".btn-add");
  addBtn.addEventListener("click", () => {
    if(isLanche){
      produtoSelecionado = produto;
      popupConfirmar.classList.add('show');
    } else {
      adicionarProduto(produto.nome, produto.preco);
    }
  });
}

function criarAdicional(produto, container){
  const div = document.createElement('div');
  div.classList.add('produtos');
  div.innerHTML = `
    <div class="topo-produto">
      <h4>${produto.nome}</h4>
      <div class="preco-controle">
        <h6>R$ ${produto.preco.toFixed(2).replace('.', ',')}</h6>
        <input type="checkbox" value="${produto.nome}" data-preco="${produto.preco}">
      </div>
    </div>
  `;
  container.appendChild(div);
}

function mostrarCarrinho() {
  listaCarrinho.innerHTML = '';

  if (carrinho.length === 0) {
    listaCarrinho.innerHTML = `<p class="carrinho-vazio">Seu carrinho est√° vazio.</p>`;
  } else {
    carrinho.forEach((item, index) => {
      const div = document.createElement('div');
      div.classList.add('item-carrinho', 'fade-in');
      div.innerHTML = `
        <div class="item-info">
          <span>${item.quantidade}x ${item.nome}</span>
          <span class="preco-item">R$ ${item.preco.toFixed(2).replace('.',',')}</span>
        </div>
        <div class="controle-quantidade">
          <button onclick="alterarQuantidade(${index}, -1)" class="diminuir">-</button>
          <span>${item.quantidade}</span>
          <button onclick="alterarQuantidade(${index}, 1)" class="aumentar">+</button>
        </div>
      `;
      listaCarrinho.appendChild(div);
    });

    const btnEsvaziarDinamico = document.createElement('button');
    btnEsvaziarDinamico.className = 'btn-esvaziar-estilo';
    btnEsvaziarDinamico.textContent = 'Esvaziar Carrinho';
    btnEsvaziarDinamico.onclick = () => {
        if (confirm("Tem certeza que deseja remover todos os itens do carrinho?")) {
            carrinho = [];
            atualizarCarrinho();
            mostrarCarrinho();
        }
    };
    listaCarrinho.appendChild(btnEsvaziarDinamico);
  }
  document.body.classList.add('popup-aberto');
  popupCarrinho.classList.add('show');
}

function alterarQuantidade(index, delta) {
  carrinho[index].quantidade += delta;
  if (carrinho[index].quantidade <= 0) {
    carrinho.splice(index, 1);
  }
  mostrarCarrinho();
  atualizarCarrinho();
}
// --- FIM FUN√á√ïES DE MANIPULA√á√ÉO DA TELA (UI) ---


// --- L√ìGICA DO FORMUL√ÅRIO DIN√ÇMICO ---
const tipoPedidoRadios = document.querySelectorAll('input[name="tipo-pedido"]');
const camposEntregaContainer = document.getElementById('campos-entrega-container');
const formaPagamentoRadios = document.querySelectorAll('input[name="forma-pagamento"]');
const campoTrocoContainer = document.getElementById('campo-troco-container');

tipoPedidoRadios.forEach(radio => {
  radio.addEventListener('change', (event) => {
    if (event.target.value === 'entrega') {
      camposEntregaContainer.style.display = 'flex';
    } else {
      camposEntregaContainer.style.display = 'none';
    }
  });
});

formaPagamentoRadios.forEach(radio => {
  radio.addEventListener('change', (event) => {
    if (event.target.value === 'dinheiro') {
      campoTrocoContainer.style.display = 'flex';
    } else {
      campoTrocoContainer.style.display = 'none';
    }
  });
});
// --- FIM L√ìGICA DO FORMUL√ÅRIO DIN√ÇMICO ---


// --- EVENT LISTENERS ---
btnFinalizar.addEventListener('click', () => mostrarCarrinho());

btnFechar.addEventListener('click', () => {
    document.body.classList.remove('popup-aberto');
    popupCarrinho.classList.remove('show');
});

btnEnviar.addEventListener('click', () => {
  const nomeCliente = document.getElementById('nome-cliente').value.trim();
  const tipoPedidoRadio = document.querySelector('input[name="tipo-pedido"]:checked');

  if (carrinho.length === 0) { alert("Seu carrinho est√° vazio!"); return; }
  if (!nomeCliente) { alert("Por favor, preencha seu nome."); return; }
  if (!tipoPedidoRadio) { alert("Por favor, selecione o tipo de pedido (Entrega ou Retirada)."); return; }
  
  const tipoPedido = tipoPedidoRadio.value;
  let mensagem = `*NOVO PEDIDO - PANGOLA*\n\n*Cliente:* ${nomeCliente}\n`;

  if (tipoPedido === 'entrega') {
    const endereco = document.getElementById('endereco-cliente').value.trim();
    const formaPagamentoRadio = document.querySelector('input[name="forma-pagamento"]:checked');
    
    if (!endereco) { alert("Por favor, preencha seu endere√ßo para entrega."); return; }
    if (!formaPagamentoRadio) { alert("Por favor, selecione a forma de pagamento."); return; }
    
    const formaPagamento = formaPagamentoRadio.value;
    mensagem += `*Tipo de Pedido:* ENTREGA\n*Endere√ßo:* ${endereco}\n\n*Itens do Pedido:*\n`;
    carrinho.forEach(p => { mensagem += `- ${p.quantidade}x ${p.nome}\n`; });
    const total = calcularTotal();
    mensagem += `\n*Total: R$ ${total.toFixed(2).replace('.',',')}*\n*Pagamento:* ${formaPagamento === 'dinheiro' ? 'Dinheiro' : 'Cart√£o'}\n`;

    if (formaPagamento === 'dinheiro') {
      const trocoPara = parseFloat(document.getElementById('troco-pedido').value);
      if (trocoPara && trocoPara >= total) {
        const troco = trocoPara - total;
        mensagem += `*Levar troco para R$ ${trocoPara.toFixed(2).replace('.',',')}* (Troco: R$ ${troco.toFixed(2).replace('.',',')})\n`;
      } else if (trocoPara && trocoPara < total) {
        alert("O valor para troco n√£o pode ser menor que o total do pedido.");
        return;
      }
    }
  } else { // Retirada
    mensagem += `*Tipo de Pedido:* RETIRADA NO LOCAL\n\n*Itens do Pedido:*\n`;
    carrinho.forEach(p => { mensagem += `- ${p.quantidade}x ${p.nome}\n`; });
    const total = calcularTotal();
    mensagem += `\n*Total: R$ ${total.toFixed(2).replace('.',',')}*\n`;
  }
  
  const originalButtonHTML = btnEnviar.innerHTML;
  btnEnviar.innerHTML = 'Enviando...';
  btnEnviar.disabled = true;

  setTimeout(() => {
    const url = `https://wa.me/5516992003253?text=${encodeURIComponent(mensagem)}`;
    window.open(url, '_blank');
    
    carrinho = [];
    atualizarCarrinho();
    mostrarCarrinho();
    
    document.body.classList.remove('popup-aberto');
    popupCarrinho.classList.remove('show');
    btnEnviar.innerHTML = originalButtonHTML;
    btnEnviar.disabled = false;
  }, 500);
});

// POPUP CONFIRMAR ADICIONAIS
btnAdicionalNao.addEventListener('click', ()=>{
  adicionarProduto(produtoSelecionado.nome, produtoSelecionado.preco);
  popupConfirmar.classList.remove('show');
});

btnAdicionalSim.addEventListener('click', ()=>{
  popupConfirmar.classList.remove('show');
  document.getElementById('lista-adicionais').innerHTML="";
  produtos.adicionais.forEach(add=>criarAdicional(add, document.getElementById('lista-adicionais')));
  popupAdicionais.classList.add('show');
});

btnAddConcluir.addEventListener('click', ()=>{
  const checks = document.querySelectorAll('#lista-adicionais input[type=checkbox]:checked');
  let selecionados = [];
  checks.forEach(c=>selecionados.push({nome:c.value, preco:parseFloat(c.dataset.preco)}));
  adicionarProduto(produtoSelecionado.nome, produtoSelecionado.preco, selecionados);
  popupAdicionais.classList.remove('show');
});

// INICIALIZAR LISTAS DE PRODUTOS
document.addEventListener('DOMContentLoaded', () => {
    Object.keys(produtos).forEach(categoria => {
        const container = document.getElementById(`lista-${categoria}`);
        if (container) {
            const isLanche = categoria.startsWith("lanches");
            produtos[categoria].forEach(produto => criarProduto(produto, container, isLanche));
        }
    });
});
</script>

</body>
</html>